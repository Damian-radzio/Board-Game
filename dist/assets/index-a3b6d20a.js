(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();let u,r=1;const w=e=>u=e,y=e=>r=e,f={totalNumberOfStitches:0,totalNumberOfThrows:0},N={gameInfoText:"Przegrałeś... Aby rozpocząć od nowa kliknij przycisk",restartGameBtnText:"Spróbuj jeszcze raz",bodyClassName:"body-end-game-defeat"},S={gameInfoText:"WYGRANA! Aby rozpocząć od nowa kliknij przycisk",restartGameBtnText:"Zagraj jeszcze raz",bodyClassName:"body-end-game-win"},j=()=>{f.totalNumberOfThrows++,f.totalNumberOfStitches+=u},b=e=>{const t=document.createElement("button"),o=document.querySelector(".game-info");(()=>{const a=document.querySelectorAll(".dice");a.forEach(s=>s.classList.add("hidden")),L.classList.add("hidden"),t.classList.add("restart-game-btn"),t.textContent=e.restartGameBtnText;const n=document.createElement("p");n.textContent=e.gameInfoText,document.body.classList.add(e.bodyClassName);const l=document.createElement("div");l.classList.add("game-stats"),l.innerHTML=`
    <h2>STATYSTYKI GRY</h2>
    <p>łączna liczba rzutów kostką: ${f.totalNumberOfThrows}</p>
    <p>Średnia liczba wyrzuconych oczek: ${(f.totalNumberOfStitches/f.totalNumberOfThrows).toPrecision(2)}</p>
        `;const c=()=>{p.forEach(m=>m.classList.remove("jumpedOn"));const s=document.getElementById("field-1");s==null||s.classList.add("first-field"),s==null||s.classList.add("active-field"),s==null||s.classList.add("jumpedOn"),L.classList.remove("hidden"),a.forEach(m=>m.classList.remove("hidden")),document.body.classList.remove(e.bodyClassName),o==null||o.removeChild(n),o==null||o.removeChild(t),o==null||o.removeChild(l),f.totalNumberOfStitches=0,f.totalNumberOfThrows=0,y(1),t.removeEventListener("click",c,!0)};o==null||o.append(n,t,l),t.addEventListener("click",c,!0)})()},C=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),g=()=>{document.body.classList.add("warning"),setTimeout(()=>{document.body.classList.remove("warning")},2e3)},k=e=>{y(e),d.forEach(t=>t.classList.add("hidden")),setTimeout(()=>{p.forEach(t=>t.classList.remove("jumpedOn")),p[r-1].classList.add("jumpedOn"),d.forEach(t=>t.classList.remove("hidden"))},500)},v=()=>{setTimeout(()=>{r===12?(d.forEach(e=>e.classList.add("hidden")),g(),setTimeout(()=>{b(N)},2e3)):r===20?b(S):r===19&&(g(),z(),d.forEach(e=>e.classList.add("hidden")),setTimeout(()=>{k(11),d.forEach(e=>e.classList.add("hidden"))},2e3))},u*500)},B=()=>{let e=1;if(r+u<=h){for(let t=r;t<=r+u-1;t++)e++,setTimeout(()=>{p.forEach(o=>o.classList.remove("jumpedOn")),p[t].classList.add("jumpedOn")},e*350);y(r+u),v()}else r+u>h&&(g(),setTimeout(()=>{d.forEach(t=>t.classList.add("hidden"))},1e3),setTimeout(()=>{y(h-(r+u-h));for(let t=h;t>=r-1;t--)e++,setTimeout(()=>{var o;p.forEach(i=>i.classList.remove("jumpedOn")),(o=p[t])==null||o.classList.add("jumpedOn")},e*350)},2e3),setTimeout(()=>{d.forEach(t=>t.classList.remove("hidden"))},4e3),v());d.forEach(t=>t.removeEventListener("click",T))},z=()=>{d.forEach(e=>e.classList.remove("active-dice")),setTimeout(()=>{d.map(e=>{e.className.includes(`${u}`)&&(e.classList.add("active-dice","blocked-dice"),setTimeout(()=>{e.classList.remove("blocked-dice")},1e3+400*u))})},100)},T=()=>(w(C(1,O)),z(),setTimeout(()=>{B()},500),j(),u),O=6,h=20,d=[],p=[],L=document.createElement("div");(function(){const e=document.getElementById("board");for(let c=1;c<=h;c++){const s=document.createElement("div");s.classList.add("board-field"),s.id=`field-${c}`,e==null||e.appendChild(s);const m=document.createElement("span");m.classList.add("field-number-span"),m.innerHTML=c.toString(),s.appendChild(m),p.push(s)}const t=document.getElementById("field-1");t==null||t.classList.add("first-field","active-field","jumpedOn");const o=document.createElement("img");o.src="src/assets/start.png",t==null||t.appendChild(o);const i=document.getElementById(`field-${h.toString()}`),a=document.createElement("img");a.src="src/assets/finish.png",i==null||i.appendChild(a),i==null||i.classList.add("last-field"),[document.getElementById("field-12"),document.getElementById("field-19")].map(c=>{c==null||c.classList.add("special-field");const s=document.createElement("img");s.src="src/assets/warning.png",c==null||c.appendChild(s)});for(let c=1;c<=O;c++){const s=document.createElement("div");s.classList.add("dice",`dice-${c}`),document.body.appendChild(s);for(let m=1;m<=c;m++){const E=document.createElement("div");E.classList.add("dice-dot",`dot-${m}`),s.appendChild(E)}d.push(s)}L.innerHTML=`
    <h2>INSTRUKCJA</h2>
    <p>1. Uważaj na pole 12! Wejdziesz? Przegrywasz!</p>
    <p>2. Uważaj na pole 19! Wejdziesz? Cofasz się do pola o numerze 11!</p>
    <p>3. Gra kończy się wygraną poprzez wejście na pole 20.</p>
    <p>4. UWAGA! Jeśli przekroczysz pole mety cofasz się z niej o tyle pól o ile ją przekroczyłeś.</p>
  `,L.classList.add("instruction"),document.body.appendChild(L);const l=document.createElement("div");l.classList.add("game-info"),document.body.appendChild(l)})();d.findIndex(e=>e.className.includes("active-dice"))===-1&&d[0].classList.add("active-dice");d.forEach(e=>e.addEventListener("click",T,!0));
